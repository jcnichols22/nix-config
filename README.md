# nix-config

ğŸŒ± **Joshâ€™s NixOS configuration** â€” declarative, flake-powered system & user config using [NixOS](https://nixos.org), [flakes](https://nixos.wiki/wiki/Flakes), and [Home Manager](https://nix-community.github.io/home-manager/).  
Designed for reproducibility, portability, and clean separation of system and user packages.

---

## ğŸ“ Directory Structure

```
nix-config/
â”œâ”€â”€ flake.nix # Entry point for system + home-manager configuration
â”œâ”€â”€ flake.lock # Pinned input versions (auto-generated)
â”œâ”€â”€ nixos/
â”‚ â”œâ”€â”€ configuration.nix # System-level configuration
â”‚ â””â”€â”€ hardware-configuration.nix # Auto-generated by nixos-generate-config
â””â”€â”€ home/
â””â”€â”€ josh/
â””â”€â”€ home.nix # Home Manager config for user josh
```



---

## ğŸš€ Features

- âœ… System managed with [flakes](https://nixos.wiki/wiki/Flakes)
- âœ… Declarative user configuration with Home Manager
- âœ… Git as the single source of truth for system state
- âœ… Flake-pinned inputs for deterministic builds
- âœ… Clean separation between system-wide and user-specific packages

---

## âš™ï¸ Usage

### ğŸ”§ NixOS Rebuild (System + User)

```
sudo nixos-rebuild switch --flake ~/nix-config#nixos
```


> `#nixos` refers to the system identifier set in `flake.nix`

### ğŸ‘¤ Home Manager (User Only)

```
home-manager switch
```


> Only needed if you're managing Home Manager outside of the system config (not required in this case).

---

## ğŸ”„ Updating Flake Inputs

To update all flake inputs (like `nixpkgs`, `home-manager`, etc.):

```
cd ~/nix-config
nix flake update
git add flake.lock
git commit -m "Update flake inputs"
```



---

## ğŸ§° Useful Commands

| Task                 | Command                                           |
|----------------------|---------------------------------------------------|
| Apply system config  | `sudo nixos-rebuild switch --flake .#nixos`       |
| Apply user config    | `home-manager switch`                             |
| Update inputs        | `nix flake update`                                |
| See activation diff  | `nixos-rebuild dry-activate --flake .#nixos`      |

---

## ğŸ›  What's Configured?

### System Packages (`configuration.nix`)

- Core tools: `vim`, `wget`, etc.
- GUI: KDE Plasma 6
- Audio: Pipewire
- Network: Tailscale, NetworkManager
- Boot: systemd-boot on UEFI
- Service: openssh

### User Packages (`home.nix`)

Used in Home Manager config for user `josh`:

- ğŸ§  Obsidian
- ğŸ” 1Password UI
- ğŸ§‘â€ğŸ’» VSCode, Git
- ğŸŒ Brave browser
- ğŸ’» Waveterm
- ğŸ§© Bash aliases
- ğŸ“ Git global config (`user.name`, `user.email`, aliases)

---

## âš ï¸ Notes

- â— Ensure youâ€™ve enabled flakes & nix-command Nix-wide. In your `configuration.nix`:

```
nix.settings.experimental-features = [ "nix-command" "flakes" ];
```


- ğŸ“ Only files tracked by Git are included in the flake. After editing or adding new files, always run:

```
git add .
```


---

## ğŸ§  Future Ideas

- [ ] Manage dotfiles with `home.file`
- [ ] Secrets management with `agenix` or `sops-nix`
- [ ] Multi-system (laptop/server/etc) configuration via `nixosConfigurations`
- [ ] Modular system profiles (`./modules/common.nix`, `desktop.nix`, etc.)

---

## ğŸ“š Resources

- ğŸ“˜ [NixOS Manual](https://nixos.org/manual/nixos/stable/)
- ğŸ¡ [Home Manager Manual](https://nix-community.github.io/home-manager)
- ğŸ§Š [Nix Flakes Wiki](https://nixos.wiki/wiki/Flakes)
- ğŸ“ [Zero to Nix](https://zero-to-nix.com)

---